<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: https://ogp.me/ns#">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  
  <title>Hook Requests in JavaScript | 在浏览器中拦截请求 - Bingyan Blog</title>
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    <link rel='manifest' href='/manifest.json'>
  

  
  
  
  <meta property="og:title" content="Hook Requests in JavaScript | 在浏览器中拦截请求 - Bingyan Blog" />
  
  <meta property="og:type" content="article" />
  
  <meta property="og:url" content="https://blog.bingyan.net/posts/965ff9c0/index.html" />
  
  <meta property="og:image" content="/img/3.jpeg" />
  
  <meta property="og:article:published_time" content="2024-10-20T08:08:00.000Z" />
  
  <meta property="og:article:author" content="冰岩作坊" />
  
  

  
<link rel="stylesheet" href="/css/var.css">

  
<link rel="stylesheet" href="/css/main.css">

  
<link rel="stylesheet" href="/css/typography.css">

  
<link rel="stylesheet" href="/css/code-highlighting.css">

  
<link rel="stylesheet" href="/css/components.css">

  
<link rel="stylesheet" href="/css/nav.css">

  
<link rel="stylesheet" href="/css/paginator.css">

  
<link rel="stylesheet" href="/css/footer.css">

  
<link rel="stylesheet" href="/css/post-list.css">

  
  
  
  
  
  
<link rel="stylesheet" href="/css/post.css">

  
  
  
  
  

  
<!-- hexo injector head_end start --><script async defer data-website-id="ed36351e-98f5-4a34-b535-a06e8e31f608" src="https://umami.bingyan.net/script.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>
    <body
        data-color-scheme="auto"
        data-uppercase-categories="true"
        
        data-config-root="/"
        
        
    >
        <nav id="theme-nav">
    <div class="inner">
        <a class="title" href="/">Home</a>
        <div class="nav-arrow"></div>
        <div class="nav-items">
            <a class="nav-item nav-item-home" href="/">Home</a>
            
            
            <a class="nav-item" href="/archives">Archives</a>
            
            
            
            <a class="nav-item" href="/friends">Friends</a>
            
            
            
            <a class="nav-item" href="/projects">Projects</a>
            
            
            
            <a class="nav-item" href="/about">About</a>
            
            
            
            <a class="nav-item nav-item-github nav-item-icon" href="https://github.com/BingyanStudio" target="_blank" aria-label="GitHub">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-codepen nav-item-icon" href="https://codepen.io/mrwillcom" target="_blank" aria-label="CodePen">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-patreon nav-item-icon" href="https://www.patreon.com/MrWillCom" target="_blank" aria-label="Patreon">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-mastodon nav-item-icon" href="https://noc.social/@MrWillCom" target="_blank" aria-label="Mastodon">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-discord nav-item-icon" href="https://discord.gg/UKuFDjcfY8" target="_blank" aria-label="Discord">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-search nav-item-icon" href="/search" target="_blank" aria-label="Search">&nbsp;</a>
            
            
            
            <a class="nav-item" href="/categories">Categories</a>
            
            
            
            <a class="nav-item" href="/about">About Us</a>
            
            
            
            <a class="nav-item" target="_blank" rel="noopener" href="https://www.bingyan.net">Official Site</a>
            
            
        </div>
    </div>
</nav>
        
<article class="post">
    <div class="meta">
        
        <div class="categories text-uppercase">
        
            <a href="/categories/前端/">前端</a>
        
        </div>
        

        
        <div class="date" id="date">
            <span>October</span>
            <span>20,</span>
            <span>2024</span>
        </div>
        

        <h1 class="title">Hook Requests in JavaScript | 在浏览器中拦截请求</h1>
    </div>

    <div class="divider"></div>

    <div class="content">
        <p><img src="data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//Z"></p>
<p>在开发浏览器插件，或者写油猴脚本的时候，需要拦截一些 ws&#x2F;http 请求。<br>本文来简单总结一下用过的实践。</p>
<h2 id="在-Chrome-Extensions-中拦截请求"><a href="#在-Chrome-Extensions-中拦截请求" class="headerlink" title="在 Chrome Extensions 中拦截请求"></a>在 Chrome Extensions 中拦截请求</h2><p>在插件中，可以通过 chrome.webRequest API 非常便捷地实现拦截。</p>
<p>webRequest - MDN</p>
<blockquote>
<p>在 Manifest V3 平台下，屏蔽网络请求&#x2F;重定向多个网址等需求无法再用 webRequest API。<br>See developer.chrome.com - 替换屏蔽型 Web 请求监听器</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// manifest.json</span></span><br><span class="line"><span class="string">&quot;permissions&quot;</span>: [</span><br><span class="line">  <span class="string">&quot;webRequest&quot;</span>,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">],</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// content.js</span></span><br><span class="line">chrome.<span class="property">webRequest</span>.<span class="property">onBeforeRequest</span>.<span class="title function_">addListener</span>(</span><br><span class="line">  <span class="function"><span class="params">details</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(details.<span class="property">url</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">urls</span>: [<span class="string">&quot;&lt;all_urls&gt;&quot;</span>] &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">chrome.<span class="property">webRequest</span>.<span class="property">onCompleted</span>.<span class="title function_">addListener</span>(</span><br><span class="line">  <span class="function"><span class="params">details</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(details)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">urls</span>: [<span class="string">&quot;&lt;all_urls&gt;&quot;</span>] &#125;</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>有关 details 对象，see onResponseStarted#details_2 - MDN</p>
<p>这一 API 可以轻松的获取请求头&#x2F;请求体&#x2F;响应头等信息。<strong>但是其无法获取到 response body</strong>，所以无法获得或修改响应结果。这就对需要 hook 到详细内容的功能不友好。</p>
<p>（这里不讨论用 devtools API 的方法，感觉不太通用）</p>
<h2 id="考虑脚本注入"><a href="#考虑脚本注入" class="headerlink" title="考虑脚本注入"></a>考虑脚本注入</h2><p>脚本注入即是将一段 JS 插入到页面某一位置中执行。可以通过事件系统 + 修改 window.XMLHttpRequest&#x2F;fetch&#x2F;WebSocket 对象的方式实现 hooks。</p>
<p><strong>拦截 XHR 请求</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注入</span></span><br><span class="line">;(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">ajaxEventTrigger</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> ajaxEvent = <span class="keyword">new</span> <span class="title class_">CustomEvent</span>(event, &#123; <span class="attr">detail</span>: <span class="variable language_">this</span> &#125;)</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">dispatchEvent</span>(ajaxEvent)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">OldXHR</span> = <span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">NewXHR</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> realXHR = <span class="keyword">new</span> <span class="title class_">OldXHR</span>()</span><br><span class="line"></span><br><span class="line">    realXHR.<span class="title function_">addEventListener</span>(<span class="string">&#x27;readystatechange&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123; ajaxEventTrigger.<span class="title function_">call</span>(<span class="variable language_">this</span>, <span class="string">&#x27;ajaxReadyStateChange&#x27;</span>) &#125;, <span class="literal">false</span>)</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// abort error load loadstart progress timeout loadend 事件同理</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">const</span> setRequestHeader = realXHR.<span class="property">setRequestHeader</span></span><br><span class="line">    realXHR.<span class="property">requestHeader</span> = &#123;&#125;</span><br><span class="line">    realXHR.<span class="property">setRequestHeader</span> = <span class="keyword">function</span> (<span class="params">name, value</span>) &#123;</span><br><span class="line">      realXHR.<span class="property">requestHeader</span>[name] = value</span><br><span class="line">      setRequestHeader.<span class="title function_">call</span>(realXHR, name, value)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> realXHR</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span> = <span class="title class_">NewXHR</span></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;ajaxReadyStateChange&#x27;</span>, e =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> xhr = e.detail</span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">    handleResponse(xhr)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>拦截 fetch 请求</strong></p>
<p>fetch API 基于 Promise，因此拦截请求不必引入事件系统。这里给出一种方案：</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fetch = <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> Promise.resolve(args)</span><br><span class="line">    .then(<span class="function"><span class="params">args</span> =&gt;</span> beforeHook(...args))</span><br><span class="line">    .then(<span class="function"><span class="params">args</span> =&gt;</span> &#123;</span><br><span class="line">      const request = <span class="keyword">new</span> Request(...args)</span><br><span class="line">      <span class="keyword">return</span> oldFetch(request)</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">resp</span> =&gt;</span> afterHook(resp))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const beforeHook = <span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line">const afterHook = <span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>See github.com&#x2F;mlegenhausen&#x2F;fetch-intercept</p>
<p><strong>拦截 ws 请求</strong></p>
<p>这里给出一个简化版的 ws hook。思路很简单，在原生 WS 的事件中插入一个钩子</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">function MutableMessageEvent (o) &#123;</span><br><span class="line">  <span class="keyword">this</span>.bubbles = o.bubbles || <span class="literal">false</span></span><br><span class="line">  <span class="keyword">this</span>.cancelBubble = o.cancelBubble || <span class="literal">false</span></span><br><span class="line">  <span class="keyword">this</span>.cancelable = o.cancelable || <span class="literal">false</span></span><br><span class="line">  <span class="keyword">this</span>.currentTarget = o.currentTarget || <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.<span class="keyword">data</span> = o.<span class="keyword">data</span> || <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.defaultPrevented = o.defaultPrevented || <span class="literal">false</span></span><br><span class="line">  <span class="keyword">this</span>.eventPhase = o.eventPhase || <span class="number">0</span></span><br><span class="line">  <span class="keyword">this</span>.lastEventId = o.lastEventId || <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">this</span>.origin = o.origin || <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">this</span>.path = o.path || new Array(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">this</span>.ports = o.parts || new Array(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">this</span>.returnValue = o.returnValue || <span class="literal">true</span></span><br><span class="line">  <span class="keyword">this</span>.source = o.source || <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.srcElement = o.srcElement || <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.target = o.target || <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.timeStamp = o.timeStamp || <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.type = o.type || <span class="string">&#x27;message&#x27;</span></span><br><span class="line">  <span class="keyword">this</span>.__proto__ = o.__proto__ || MessageEvent.__proto__</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wsHook = &#123;</span><br><span class="line">  before: <span class="keyword">data</span> =&gt; <span class="keyword">data</span>,</span><br><span class="line">  after: e =&gt; e</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> _WS = WebSocket</span><br><span class="line">WebSocket = function (url) &#123;</span><br><span class="line">  <span class="keyword">this</span>.url = url</span><br><span class="line">  <span class="keyword">const</span> WSObject = new _WS(url)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> _send = WSObject.send</span><br><span class="line">  WSObject.send = function (<span class="keyword">data</span>) &#123;</span><br><span class="line">    arguments[<span class="number">0</span>] = wsHook.before(<span class="keyword">data</span>) || <span class="keyword">data</span></span><br><span class="line">    _send.apply(<span class="keyword">this</span>, arguments)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  WSObject._addEventListener = WSObject.addEventListener</span><br><span class="line">  WSObject.addEventListener = function () &#123;</span><br><span class="line">    <span class="keyword">const</span> eventThis = <span class="keyword">this</span></span><br><span class="line">    <span class="comment">// if eventName is &#x27;message&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (arguments[<span class="number">0</span>] === <span class="string">&#x27;message&#x27;</span>) &#123;</span><br><span class="line">      arguments[<span class="number">1</span>] = (function (userFunc) &#123;</span><br><span class="line">        <span class="keyword">return</span> function instrumentAddEventListener () &#123;</span><br><span class="line">          arguments[<span class="number">0</span>] = wsHook.after(new MutableMessageEvent(arguments[<span class="number">0</span>]))</span><br><span class="line">          <span class="keyword">if</span> (arguments[<span class="number">0</span>] === <span class="literal">null</span>) <span class="keyword">return</span></span><br><span class="line">          userFunc.apply(eventThis, arguments)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)(arguments[<span class="number">1</span>])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> WSObject._addEventListener.apply(<span class="keyword">this</span>, arguments)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> WSObject</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用</span></span><br><span class="line">wsHook.before = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.<span class="built_in">log</span>(data)</span><br><span class="line">&#125;</span><br><span class="line">wsHook.after = <span class="function">(<span class="params">messageEvent</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.<span class="built_in">log</span>(messageEvents)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="在浏览器拓展中注入-hooks"><a href="#在浏览器拓展中注入-hooks" class="headerlink" title="在浏览器拓展中注入 hooks"></a>在浏览器拓展中注入 hooks</h2><p>由于在浏览器拓展 content_scripts 环境与真实的页面环境隔离，只能获取 DOM 等，无法直接更改 window.XMLHttpRequest&#x2F;fetch&#x2F;WebSocket 对象。所以必须借助 script 标签注入。</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// manifest.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;content_scripts&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;matches&quot;</span>: [<span class="string">&quot;http://*/*&quot;</span>, <span class="string">&quot;https://*/*&quot;</span>],</span><br><span class="line">      <span class="string">&quot;js&quot;</span>: [<span class="string">&quot;content-script.js&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;web_accessible_resources&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;resources&quot;</span>: [<span class="string">&quot;injected-script.js&quot;</span>],</span><br><span class="line">      <span class="string">&quot;matches&quot;</span>: [<span class="string">&quot;http://*/*&quot;</span>, <span class="string">&quot;https://*/*&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// content-script.js</span></span><br><span class="line">const scriptDOM = document<span class="selector-class">.createElement</span>(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">scriptDOM<span class="selector-class">.setAttribute</span>(<span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;injected-script.js&#x27;</span>)</span><br><span class="line">document<span class="selector-class">.head</span><span class="selector-class">.appendChild</span>(s)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// injected-script.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改 XHR 对象</span></span><br><span class="line"><span class="built_in">window</span>.XMLHttpRequest = newXHR</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;ajaxReadyStateChange&#x27;</span>, handleFunc)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://github.com/debingfeng/blog/blob/master/docs/javascript/practise/JavaScript%E7%9B%91%E5%90%AC%E6%89%80%E6%9C%89Ajax%E8%AF%B7%E6%B1%82%E7%9A%84%E4%BA%8B%E4%BB%B6.md">https://github.com/debingfeng/blog/blob/master/docs/javascript/practise/JavaScript%E7%9B%91%E5%90%AC%E6%89%80%E6%9C%89Ajax%E8%AF%B7%E6%B1%82%E7%9A%84%E4%BA%8B%E4%BB%B6.md</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/mlegenhausen/fetch-intercept">https://github.com/mlegenhausen/fetch-intercept</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/skepticfx/wshook">https://github.com/skepticfx/wshook</a></p>

    </div>

    
    <div class="about">
        <h1>About this Post</h1>
        <div class="details">
            <p>This post is written by 冰岩作坊, licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc/4.0">CC BY-NC 4.0</a>.</p>
        </div>
        
        <p class="tags">
            
            <i class="icon"></i>
            <a href="/tags/JavaScript/" class="tag">#JavaScript</a>
        </p>
        
    </div>
    

    <div class="container post-prev-next">
        
        <a href="/posts/dcf1d36/" class="next">
            <div>
                <div class="text">
                    <p class="label">Next</p>
                    <h3 class="title">无锁的原子操作：Redis如何应对并发访问？</h3>
                </div>
            </div>
        </a>
        
        
        <a href="/posts/3e5c772e/" class="prev">
            <div>
                <div class="text">
                    <p class="label">Previous</p>
                    <h3 class="title">用户行为分析：用户留存</>
                </div>
            </div>
        </a>
        
    </div>

    
        
        
    
</article>

        <footer>
    <div class="inner">
        <div class="links">
            
            <div class="group">
                <h2 class="title">Blog</h2>
                
                <a href="/" class="item">Blog</a>
                
                <a href="/archives" class="item">Archives</a>
                
                <a href="/tags" class="item">Tags</a>
                
                <a href="/categories" class="item">Categories</a>
                
                <a href="/search" class="item">Search</a>
                
                <a href="/friends" class="item">Friends</a>
                
                <a href="/projects" class="item">Projects</a>
                
                <a href="/resume" class="item">Resume</a>
                
                <a href="/about" class="item">About</a>
                
                <a href="/atom.xml" class="item">RSS</a>
                
                <a href="/" class="item">主页</a>
                
                <a href="/archives" class="item">归档</a>
                
                <a href="/categories" class="item">主题</a>
                
                <a href="/about" class="item">关于我们</a>
                
                <a href="/search" class="item">搜索</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Projects</h2>
                
                <a target="_blank" rel="noopener" href="https://github.com/MrWillCom/rsa-cli" class="item">RSA CLI</a>
                
                <a target="_blank" rel="noopener" href="https://github.com/MrWillCom/hexo-theme-cupertino" class="item">Hexo Theme Cupertino</a>
                
                <a target="_blank" rel="noopener" href="https://github.com/MrWillCom/a-calendar" class="item">A Calendar</a>
                
                <a target="_blank" rel="noopener" href="https://github.com/MrWillCom/auto-mirroring-bucket" class="item">Auto Mirroring Bucket</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Me</h2>
                
                <a target="_blank" rel="noopener" href="https://github.com/MrWillCom" class="item">GitHub</a>
                
                <a target="_blank" rel="noopener" href="https://codepen.io/mrwillcom" class="item">CodePen</a>
                
                <a target="_blank" rel="noopener" href="https://www.patreon.com/MrWillCom" class="item">Patreon</a>
                
                <a target="_blank" rel="noopener" href="https://noc.social/@MrWillCom" class="item">Mastodon</a>
                
                <a target="_blank" rel="noopener" href="https://discord.gg/UKuFDjcfY8" class="item">Discord</a>
                
                <a href="mailto:mr.will.com@outlook.com" class="item">Email</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Links</h2>
                
                <a target="_blank" rel="noopener" href="https://bingyan.net" class="item">官网</a>
                
                <a target="_blank" rel="noopener" href="https://bingyan.itch.io" class="item">游戏组官网</a>
                
                <a href="" class="item">微信公众号</a>
                
                <a target="_blank" rel="noopener" href="https://github.com/BingyanStudio" class="item">GitHub</a>
                
                <a target="_blank" rel="noopener" href="https://www.zhihu.com/people/by_bingyan" class="item">知乎</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Contact Us</h2>
                
                <a href="mailto:contact@bingyan.net" class="item">contact@bingyan.net</a>
                
            </div>
            
        </div>
        <span>&copy; 2025 冰岩作坊<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> </span>
        
        <br>
        <span class="footer-extra-description">2024 © Powered by Bingyan Studio & Hexo. All Rights Reserved.</span>
        
        
            <br>
            <div class="color-scheme-toggle" role="radiogroup" id="theme-color-scheme-toggle">
                <label>
                    <input type="radio" value="light">
                    <span>Light</span>
                </label>
                <label>
                    <input type="radio" value="dark">
                    <span>Dark</span>
                </label>
                <label>
                    <input type="radio" value="auto">
                    <span>Auto</span>
                </label>
            </div>
        
    </div>
</footer>


        
<script src="/js/main.js"></script>

        
        
        

        
        <script src="https://unpkg.com/scrollreveal"></script>
        <script>
            window.addEventListener('load', () => {
                ScrollReveal({ delay: 250, reset: true, easing: 'cubic-bezier(0, 0, 0, 1)' })
                ScrollReveal().reveal('.post-list-item .cover-img img')
                ScrollReveal().reveal('.post-list-item, .card, .content p img, .content .block-large img', { distance: '60px', origin: 'bottom', duration: 800 })
            })
        </script>
        
    </body>
</html>